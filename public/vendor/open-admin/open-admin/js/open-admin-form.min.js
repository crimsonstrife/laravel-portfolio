admin.form={id:!1,tabs_ref:!1,beforeSaveCallbacks:[],init:function(){this.addAjaxSubmit(),this.footer(),this.tabs(),this.initValidation()},addSaveCallback:function(callback){this.beforeSaveCallbacks.push(callback)},beforeSave:function(){for(let i in this.beforeSaveCallbacks){(0,this.beforeSaveCallbacks[i])()}},addAjaxSubmit:function(){Array.from(document.getElementsByTagName("form")).forEach((form=>{null==form.getAttribute("pjax-container")||form.classList.contains("has-ajax-handler")||(form.addEventListener("submit",(function(event){return admin.form.submit(event.target),event.preventDefault(),!1})),form.classList.add("has-ajax-handler"))}))},submit:function(form,result_function){let method=form.getAttribute("method").toLowerCase(),url=String(form.getAttribute("action")).split("?")[0],obj={};if(this.beforeSave(),admin.form.validate(form)){if("post"===method||"put"===method)obj.data=new FormData(form),obj.method=method;else{let data=new FormData(form);url+="?"+new URLSearchParams(data).toString(),"function"!=typeof result_function&&admin.ajax.setUrl(url)}"function"==typeof result_function?admin.ajax.request(url,obj,result_function):admin.ajax.load(url,obj)}else console.log("Form still has errors")},footer:function(){document.querySelectorAll(".after-submit").forEach((check=>{check.addEventListener("click",(function(){document.querySelectorAll(".after-submit:not([value='"+this.value+"']").forEach((other=>{other.checked=!1}))}))}))},tabs:function(){var hash=document.location.hash;if(hash){var activeTab=document.querySelector('.nav-tabs a[href="'+hash+'"]');activeTab&&new bootstrap.Tab(activeTab).show()}this.tabs_ref=document.querySelectorAll(".nav-tabs"),this.tabs_ref.length&&this.tabs_ref.forEach((tab=>{tab.addEventListener("shown.bs.tab",(function(event){history.replaceState(null,null,event.target.hash)}))})),this.check_tab_errors()},check_tab_errors(){let errors=document.querySelectorAll(".tab-pane .has-error, .was-validated .tab-pane .form-control:invalid");if(this.tabs_ref.length&&errors){let first_tab=!1;if(errors.forEach((error=>{let tabId="#"+error.closest(".tab-pane").getAttribute("id");document.querySelector('li a[href="'+tabId+'"] i').classList.remove("hide"),first_tab||(first_tab=tabId)})),first_tab){let errorTab=document.querySelector('.nav-tabs a[href="'+first_tab+'"]');new bootstrap.Tab(errorTab).show()}}},disable_cascaded_forms:function(selector){document.querySelector(selector).addEventListener("submit",(function(event){let elems=event.target.querySelectorAll("div.cascade-group.d-none input");elems&&elems.forEach((field=>{field.setAttribute("disabled",!0)}))}))},initValidation:function(){document.querySelectorAll(".needs-validation").forEach((function(form){form.addEventListener("submit",(function(event){return admin.form.validate(form)||(event.preventDefault(),event.stopPropagation()),!1}),!1)}))},validate:function(form){let res=!0;return form.classList.contains("needs-validation")&&(res=form.checkValidity(),form.classList.add("was-validated"),admin.form.check_tab_errors()),res}};